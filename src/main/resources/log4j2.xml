<?xml version="1.0" encoding="UTF-8"?>

<configuration status="WARN" monitorInterval="30">
    <Properties>
        <Property name="LOG_HOME">logs/party</Property>
        <property name="INFO_LOG_FILE_NAME">${LOG_HOME}/info</property>
        <property name="WARN_LOG_FILE_NAME">${LOG_HOME}/warn</property>
        <property name="ERROR_LOG_FILE_NAME">${LOG_HOME}/error</property>
    </Properties>

    <appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <ThresholdFilter level="trace" onMatch="ACCEPT" onMismatch="DENY" />
            <PatternLayout pattern="%d{yyyy-MM-dd_HH:mm:ss,SSS} %-5level %class{36} %L %M| - %m%n" />
        </Console>
        <RollingFile name="delivery_all_log" fileName="${LOG_HOME}/delivery_job_all.log" filePattern="${LOG_HOME}/$${date:yyyy-MM}/delivery_job_all-%d{yyyy-MM-dd}-%i.log">
            <PatternLayout pattern="time:%d{yyyy-MM-dd_HH:mm:ss,SSS}    remote_addr:%X{ip}    thread:%t    class:%C{1}.%M    level:%p    line:%L    msg:%m%n" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" />
                <SizeBasedTriggeringPolicy size="20MB" />
            </Policies>
            <DefaultRolloverStrategy max="20" />
        </RollingFile>
        <!-- INFOログの設定 -->
        <RollingFile name="delivery_job_info_log" fileName="${INFO_LOG_FILE_NAME}/delivery_job_info_log.log" filePattern="${INFO_LOG_FILE_NAME}/$${date:yyyy-MM}/delivery_job_info_log-%d{yyyy-MM-dd}-%i.log" append="true">
            <Filters>
                <ThresholdFilter level="WARN" onMatch="DENY" onMismatch="NEUTRAL"/> 
                <ThresholdFilter level="INFO" onMatch="ACCEPT" onMismatch="DENY" />
            </Filters>
            <PatternLayout pattern="time:%d{yyyy-MM-dd_HH:mm:ss,SSS}    remote_addr:%X{ip}    thread:%t    class:%C{1}.%M    level:%p    line:%L    msg:%m%n" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="false" />
                <SizeBasedTriggeringPolicy size="20MB" />
            </Policies>
            <DefaultRolloverStrategy max="20" />
        </RollingFile>
        <!-- WARNログの設定 -->
        <RollingFile name="delivery_job_warn_log" fileName="${WARN_LOG_FILE_NAME}/delivery_job_warn_log.log" filePattern="${WARN_LOG_FILE_NAME}/$${date:yyyy-MM}/delivery_job_warn_log-%d{yyyy-MM-dd}-%i.log" append="true">
            <Filters>
                <ThresholdFilter level="ERROR" onMatch="DENY" onMismatch="NEUTRAL"/> 
                <ThresholdFilter level="WARN" onMatch="ACCEPT" onMismatch="DENY" />
            </Filters>
            <PatternLayout pattern="time:%d{yyyy-MM-dd_HH:mm:ss,SSS}    remote_addr:%X{ip}    thread:%t    class:%C{1}.%M    level:%p    line:%L    msg:%m%n" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="false" />
                <SizeBasedTriggeringPolicy size="20MB" />
            </Policies>
            <DefaultRolloverStrategy max="20" />
        </RollingFile>
        <!-- ERRORログの設定 -->
        <RollingFile name="delivery_job_error_log" fileName="${ERROR_LOG_FILE_NAME}/delivery_job_error_log.log" filePattern="${ERROR_LOG_FILE_NAME}/$${date:yyyy-MM}/delivery_job_error_log-%d{yyyy-MM-dd}-%i.log"
            append="true">
            <Filters>
                <ThresholdFilter level="ERROR" onMatch="ACCEPT" onMismatch="DENY" />
            </Filters>
            <PatternLayout pattern="time:%d{yyyy-MM-dd_HH:mm:ss,SSS}    remote_addr:%X{ip}    thread:%t    class:%C{1}.%M    level:%p    line:%L    msg:%m%n" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="false" />
                <SizeBasedTriggeringPolicy size="20MB" />
            </Policies>
            <DefaultRolloverStrategy max="20" />
        </RollingFile>
    </appenders>
    <loggers>
        <logger name="org.mybatis" level="INFO"></logger>
        <root level="DEBUG">
            <AppenderRef ref="delivery_job_error_log" />
            <AppenderRef ref="delivery_job_warn_log" />
            <AppenderRef ref="delivery_job_info_log" />
            <appender-ref ref="Console" />
            <AppenderRef ref="delivery_all_log" />
        </root>
    </loggers>
</configuration>